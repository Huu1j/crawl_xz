# JS中的漏洞信息-先知社区

> **来源**: https://xz.aliyun.com/news/16391  
> **文章ID**: 16391

---

# 声明

本文章所分享内容仅用于网络安全技术讨论，切勿用于违法途径，所有渗透都需获取授权，违者后果自行承担，与本号及作者无关，请谨记守法. 此文章不允许未经授权转发至除先知社区以外的其它平台！！！

# 前言

当我们拿到网站，但是又不知道密码，目录扫描也扫不出有效的信息时，我们可以从前端JS源码入手，找找是否有可以利用的点，或者未授权的接口从而一步一步扩大危害，拿到系统源码或者用户信息等。

# SQL注入

登录框开局必出货，hhh

![](images/20241229213455-b0f2af3e-c5e9-1.png)  
查看前端源码，发现Identity\_Get接口，且存在userid和researchid参数

![](images/20241229213505-b6c9a3ae-c5e9-1.png)  
访问该接口抓包，使用burp进行测试，通过单引号重放发生报错

![](images/20241229213518-be40aa4c-c5e9-1.png)  
SQLMAP直接一键梭哈

```
python sqlmap.py -u "http://ip/Api/xxx/xxx/xxx/Identity_Get?USERID=1&RESEARCHID=1" --batch --risk 3

```

Oracle数据库

![](images/20241229213638-ee18c010-c5e9-1.png)  
查询当前数据库用户

```
python sqlmap.py -u "http://ip/Api/xxx/xxx/xxx/Identity_Get?USERID=1&RESEARCHID=1" --batch --risk 3 --current-user

```

![](images/20241229213716-04f9fc90-c5ea-1.png)

# 地图key泄露

这个KEY泄露虽然很常见，但是能用的不多，这个能够利用的我还是第一次遇见  
高德地图key

![](images/20241229213825-2da5c2e6-c5ea-1.png)  
此key有效，hhh

![](images/20241229213832-3216a638-c5ea-1.png)

# 文件下载一

访问网站打开插件查看接口信息，发现/xxx/xxx/zipDownload，以看这种就有戏啊

![](images/20241229213840-37165034-c5ea-1.png)  
访问连接，通过提示信息输入path和type参数

![](images/20241229213849-3c51abb6-c5ea-1.png)

![](images/20241229213853-3eb71e5e-c5ea-1.png)  
直接目录遍历下载

```
https://ip/xxx/xxx/zipDownload?type=1&path=/../../../../../../..//etc/passwd
```

![](images/20241229213906-46226392-c5ea-1.png)  
发现shadow密码文件也可以进行下载，猜测网站用户为root权限

![](images/20241229213913-4aaafbfe-c5ea-1.png)  
后面就是FUZZ下源码，或者SSH私钥登录，直接拿下shell，美滋滋

# 文件下载二

访问网站，打开熊猫插件发现一个export的接口

![](images/20241229213928-532b669c-c5ea-1.png)  
直接使用目录穿越，可把整个网站打包下来，包括数据库备份信息，源码甚至是中间件

```
http://ip/xxx/Opt/export?path=../../
```

![](images/20241229213937-58c1963a-c5ea-1.png)

# 信息泄露

这个其实危害感觉不大，只泄露了用户名，手机号等一些信息，但是这个网站SRC的，所以还有20元子赏金，hhh  
查看前端const.js文件，发现两个管理员用户信息

![](images/20241229213944-5cd25cbe-c5ea-1.png)  
直接在找回密码处输入用户名密码，获取到手机号信息  
如下图1：

![](images/20241229213952-61ad2638-c5ea-1.png)  
如下图2：

![](images/20241229213959-65e468d8-c5ea-1.png)  
只有两个账号，泄露的东西也不多，所以赏金不高，hhh
